{"version":3,"sources":["../../../api/server/services/BookService.js"],"names":["models","require","BookService","getAllBooks","Book","findAll","error","Error","addBook","newBook","create","updateBook","id","updatedBook","bookToUpdate","findOne","where","Number","update","getBook","book","deleteBook","deletedBook","destroy","module","exports"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,eAAD,CAAtB;;AAEA,MAAMC,WAAN,CAAkB;AAChB,eAAaC,WAAb,GAA2B;AACzB,QAAI;AACF,aAAO,MAAMH,MAAM,CAACI,IAAP,CAAYC,OAAZ,EAAb;AACD,KAFD,CAGA,OAAOC,KAAP,EAAc;AAAE,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AAAwB;AACzC;;AAED,eAAaE,OAAb,CAAqBC,OAArB,EAA8B;AAC5B,QAAI;AACF,aAAO,MAAMT,MAAM,CAACI,IAAP,CAAYM,MAAZ,CAAmBD,OAAnB,CAAb;AACD,KAFD,CAGA,OAAOH,KAAP,EAAc;AAAE,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AAAwB;AACzC;;AAED,eAAaK,UAAb,CAAwBC,EAAxB,EAA4BC,WAA5B,EAAyC;AACvC,QAAI;AACF,YAAMC,YAAY,GAAG,MAAMd,MAAM,CAACI,IAAP,CAAYW,OAAZ,CAAoB;AAC7CC,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,EAAE,EAAEK,MAAM,CAACL,EAAD;AAAZ;AADsC,OAApB,CAA3B;;AAIA,UAAIE,YAAJ,EAAkB;AAChB,cAAMd,MAAM,CAACI,IAAP,CAAYc,MAAZ,CAAmBL,WAAnB,EAAgC;AACpCG,UAAAA,KAAK,EAAE;AAAEJ,YAAAA,EAAE,EAAEK,MAAM,CAACL,EAAD;AAAZ;AAD6B,SAAhC,CAAN;AAIA,eAAOC,WAAP;AACD;AACF,KAZD,CAaA,OAAOP,KAAP,EAAc;AAAE,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AAAwB;AACzC;;AAED,eAAaa,OAAb,CAAqBP,EAArB,EAAyB;AACvB,QAAI;AACF,YAAMQ,IAAI,GAAG,MAAMpB,MAAM,CAACI,IAAP,CAAYW,OAAZ,CAAoB;AACrCC,QAAAA,KAAK,EAAE;AAAGJ,UAAAA,EAAE,EAAEK,MAAM,CAACL,EAAD;AAAb;AAD8B,OAApB,CAAnB;AAIA,aAAOQ,IAAP;AACD,KAND,CAOA,OAAOd,KAAP,EAAc;AAAE,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AAAwB;AACzC;;AAED,eAAae,UAAb,CAAwBT,EAAxB,EAA4B;AAC1B,QAAI;AACF,YAAMQ,IAAI,GAAG,MAAMpB,MAAM,CAACI,IAAP,CAAYW,OAAZ,CAAoB;AACrCC,QAAAA,KAAK,EAAE;AAAEJ,UAAAA,EAAE,EAAEK,MAAM,CAACL,EAAD;AAAZ;AAD8B,OAApB,CAAnB;;AAIA,UAAIQ,IAAJ,EAAU;AACR,cAAME,WAAW,GAAG,MAAMtB,MAAM,CAACI,IAAP,CAAYmB,OAAZ,CAAoB;AAC5CP,UAAAA,KAAK,EAAE;AAAEJ,YAAAA,EAAE,EAAEK,MAAM,CAACL,EAAD;AAAZ;AADqC,SAApB,CAA1B;AAIA,eAAOU,WAAP;AACD;;AAED,aAAO,IAAP;AACD,KAdD,CAeA,OAAOhB,KAAP,EAAc;AAAE,YAAM,IAAIC,KAAJ,CAAUD,KAAV,CAAN;AAAwB;AACzC;;AA5De;;AA+DlBkB,MAAM,CAACC,OAAP,GAAiBvB,WAAjB","sourcesContent":["const models = require('../src/models');\n\nclass BookService {\n  static async getAllBooks() {\n    try {\n      return await models.Book.findAll();\n    }\n    catch (error) { throw new Error(error) }\n  }\n\n  static async addBook(newBook) {\n    try {\n      return await models.Book.create(newBook);\n    }\n    catch (error) { throw new Error(error) }\n  }\n\n  static async updateBook(id, updatedBook) {\n    try {\n      const bookToUpdate = await models.Book.findOne({\n        where: { id: Number(id) }\n      });\n\n      if (bookToUpdate) {\n        await models.Book.update(updatedBook, {\n          where: { id: Number(id) }\n        });\n\n        return updatedBook;\n      }\n    }\n    catch (error) { throw new Error(error) }\n  }\n\n  static async getBook(id) {\n    try {\n      const book = await models.Book.findOne({\n        where: {  id: Number(id)}\n      });\n\n      return book;\n    }\n    catch (error) { throw new Error(error) }\n  }\n\n  static async deleteBook(id) {\n    try {\n      const book = await models.Book.findOne({\n        where: { id: Number(id) }\n      });\n\n      if (book) {\n        const deletedBook = await models.Book.destroy({\n          where: { id: Number(id) }\n        });\n\n        return deletedBook;\n      }\n\n      return null;\n    }\n    catch (error) { throw new Error(error) }\n  }\n}\n\nmodule.exports = BookService;"],"file":"BookService.js"}